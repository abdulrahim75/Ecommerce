apiVersion: v1
kind: Service
metadata:
  name: backend-service
spec:
  # The selector targets the Pods with the 'app: backend' and 'traffic: active' labels.
  # Initially, only the Blue deployment will have 'traffic: active'.
  selector:
    app: backend
    traffic: active # <-- Key for Blue/Green switch
  ports:
    - protocol: TCP
      port: 9000
      targetPort: 9000